
<!doctype html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en-US"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en-US"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en-US"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en-US"> <!--<![endif]-->
<head>
	<title>Michael Barrett @ Abouthalf.com.  : Setting up PHP in Mac OS X 10.6 Snow Leopard</title>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta name="description" content="Recipes, Web Development, Reviews, Photos, Links, and Things">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="../../wp-content/themes/abouthalf/style.css" type="text/css" media="all" />
	<!--[if IE 7]>
	<link rel="stylesheet" href="http://blog.abouthalf.com/wp-content/themes/abouthalf/css/fonts/fontawesome/css/font-awesome-ie7.css" type="text/css" media="all" />
	<![endif]-->
	<script src="../../wp-content/themes/abouthalf/js/libs/modernizr-2.5.3.min.js"></script>
	<script src="../../wp-content/themes/abouthalf/js/libs/bootstrap.js"></script>
</head>
<body class="single single-post postid-243 single-format-standard">

<div id="main">
	<header id="hd">
		<h1>
			<a href="../../index.html">Welcome to <em>About<span>Half</span></em></a>
		</h1>
		<p>
			<a href="index.html#ft">
				menu <i class="icon-arrow-down"></i>
			</a>
			-
			<a href="../../index.html">
				<i class="icon-home"></i><span class="hide"> http://blog.abouthalf.com</span>
			</a>
		</p>
	</header>
	<div class="posts">
	
				
	
		
											
						
						<article id="post-243" class="format-standard post-243 post type-post status-publish hentry category-development">
			<div class="post-head">
				<h1 class="post-title sub-header">
					<a href="index.html" rel="bookmark" title="Permanent Link to Setting up PHP in Mac OS X 10.6 Snow Leopard">
						Setting up PHP in Mac OS X 10.6 Snow Leopard					</a>
				</h1>
				<p class="postmetadata small">
										<i class="icon-folder-open"></i> <a href="../../category/development/index.html" rel="category tag">Development</a><br />
					<i class="icon-calendar"></i> Saturday, August 29th, 2009<br />
										<a href="https://twitter.com/share?url=http://blog.abouthalf.com/development/php-in-snow-leopard/&amp;text=Setting+up+PHP+in+Mac+OS+X+10.6+Snow+Leopard&amp;via=abouthalf"><i class="icon-twitter"></i> Tweet</a><br />
									</p>
			</div>
						<div class="entry total-368  ">
				<p>I updated my Mac with OS X 10.6 last night and the process went very smoothly without any problems. Apple does a good job with OS upgrades and installs, and they almost always go very smoothly. Most users can just pop in the disk, click the button, restart and go.</p>
<p>In my case, I use my Mac for web development in PHP so I had a couple of extra tasks to perform.</p>
<p>I prefer to use the internal Apache 2 web server provided by Apple &#8211; mostly because it can be enabled and disabled with a click on a System Preference panel and the built in system log browser (Console.app) reports errors in Apache and PHP. Handy.</p>
<p>In the past I used pre-built and packaged PHP module from <a href="http://www.entropy.ch/software/macosx/php/">Mark Liyanage</a> &#8211; his package is the defacto standard for PHP development on a Mac, it&#8217;s linked from the <a href="http://www.php.net/downloads.php">PHP.net</a> site directly. Mark&#8217;s packages always work very well and have anything and everything you could want in a PHP binary. His packages are intended to work with the built in apache web server.</p>
<p>But Mark is only one man, and he can&#8217;t be expected to crank out a PHP package the same day a new operating system is released. Man&#8217;s got to eat.</p>
<p>Apple has bundled PHP (along with Ruby, Java, Python, and other developer tools) with Mac OS X from the beginning. However Apple&#8217;s versions of PHP are not always the most current, or may be missing features. Fore example, in OS X 10.5 Apple didn&#8217;t include PDO drivers for MySQL &#8211; which is a weird thing to leave out &#8211; but there you go. Thus most developers either compile their own versions of PHP (and ruby, and python, etc) or rely on a prepackaged binary.</p>
<p>However this time around, Apple&#8217;s included version of PHP is up to date and full featured (enough to be useful).</p>
<p>PHP 5.3 is included in Mac OS X 10.6 by default and this time they didn&#8217;t forget the PDO drivers for MySQL. Whee! Here is the configure command from the built in PHP on my system:</p>
<pre>'/var/tmp/apache_mod_php/apache_mod_php-53~1/php/configure'
'--prefix=/usr'
'--mandir=/usr/share/man'
'--infodir=/usr/share/info'
'--disable-dependency-tracking'
'--sysconfdir=/private/etc'
'--with-apxs2=/usr/sbin/apxs'
'--enable-cli'
'--with-config-file-path=/etc'
'--with-libxml-dir=/usr'
'--with-openssl=/usr'
'--with-kerberos=/usr'
'--with-zlib=/usr'
'--enable-bcmath'
'--with-bz2=/usr'
'--enable-calendar'
'--with-curl=/usr'
'--enable-exif'
'--enable-ftp'
'--with-gd'
'--with-jpeg-dir=/BinaryCache/apache_mod_php/apache_mod_php-53~1/Root/usr/local'
'--with-png-dir=/BinaryCache/apache_mod_php/apache_mod_php-53~1/Root/usr/local'
'--enable-gd-native-ttf'
'--with-ldap=/usr'
'--with-ldap-sasl=/usr'
'--enable-mbstring'
'--enable-mbregex'
'--with-mysql=mysqlnd'
'--with-mysqli=mysqlnd'
'--with-pdo-mysql=mysqlnd'
'--with-mysql-sock=/var/mysql/mysql.sock'
'--with-iodbc=/usr'
'--enable-shmop'
'--with-snmp=/usr'
'--enable-soap'
'--enable-sockets'
'--enable-sysvmsg'
'--enable-sysvsem'
'--enable-sysvshm'
'--with-xmlrpc'
'--with-iconv-dir=/usr'
'--with-xsl=/usr'
'--with-pcre-regex=/usr'</pre>
<p>Look at all those goodies. This has everything I need for my current development needs, so I didn&#8217;t bother with building my own PHP.</p>
<p>Before I began the upgrade process I made a copy of my apache configuration files. By default, apache on OS X creates a configuration file for each user account on the computer. These configuration files can be found in /etc/apache2/users/ and are named with your short user name, followed by &#8220;.conf&#8221; e.g. &#8220;username.conf&#8221;</p>
<p>I keep all of my apache development configurations in my user configuration file, so I just made a copy of that file and stashed it on my desktop.</p>
<p>While I&#8217;m comfortable mucking about in the command line, I&#8217;m a visual person and I prefer to see what I&#8217;m doing. Mac OS X typically hides the unix system files in the Finder &#8211; this prevents horrible accidents &#8211; but you can still use the Finder to dig around in the hidden file system.</p>
<p>In the Finder (i.e. click the desktop) select the &#8220;Go&#8221; menu at the top of the screen, look for the &#8220;Go to folderâ€¦&#8221; option.</p>
<p><img class="alignnone size-full wp-image-246" title="go-to-folder" src="../../wp-content/uploads/2009/08/go-to-folder.png" alt="go-to-folder" width="335" height="360" /></p>
<p>This will bring up the following screen, where you can type the file path you want. You can even tab-complete path names.</p>
<p><img class="alignnone size-full wp-image-248" title="Go" src="../../wp-content/uploads/2009/08/go-screen.png" alt="Go" width="509" height="229" /></p>
<p>Now you can browse all those sneaky hidden files, right-click them and edit them in TextMate</p>
<p><img class="alignnone size-full wp-image-249" title="Apache2 folder" src="../../wp-content/uploads/2009/08/apache2_folder.png" alt="Apache2 folder" width="625" height="454" /></p>
<p>From here I could just drag the httpd.conf file to my desktop, and then dig into the users directory find my configuration file, and drag that to the desktop.</p>
<p>Next I made a back up of my MySQL databases by opening Terminal and typing:</p>
<p>
<pre><code>mysqldump -u root -p<em>password</em> --all-databases &gt; mysql_backup.sql</code></pre>
</p>
<p>Naturally you should use your own MySQL root password and not &#8220;password&#8221;. Naturally. This backup includes user tables as well as your databases, allowing you to reimport the whole kielbasa.</p>
<p>I ran a manual TimeMachine backup one more time to make sure I got everything backed up and then I ran the OS X 10.6 installer. Point. Click. Wait. Restart. Restart. Done. Easy.</p>
<p>After the update was done, I downloaded a new 64 bit intel installer for MySQL 5.0 here: http://dev.mysql.com/downloads/mysql/5.0.html#macosx-dmg &#8211; the site indicates OS X 10.5 but it works fine in 10.6</p>
<p>I reinstalled MySQL, the StartupItem, and the System Preference panel. From the command line I ran the following to reimport all of my data and users:</p>
<p>
<pre><code>mysql --user=root --password=<em>password</em> &lt; mysql_backup.sql</code></pre>
</p>
<p>The 10.6 installer honored my existing apache configuration files, so I didn&#8217;t actually have to replace those. But if you have never enabled PHP, simply go to /etc/apache2/ and edit httpd.conf in TextMate (TextMate will ask for your administrator password to save the file). Look for the line which reads:</p>
<p>
<pre><code>#LoadModule php5_module        libexec/apache2/libphp5.so</code></pre>
</p>
<p>Remove the pound sign (#) and save the file.</p>
<p>The default PHP installation on Mac OS X does not ship with a php.ini file. You&#8217;ll need to create one in order to configure PHP to find MySQL.</p>
<p>Go to /etc using the &#8220;Go&#8221; menu as indicated above. You should see a file entitled php.ini.default. Open this file in TextMate and save as &#8220;php.ini&#8221;</p>
<p>Set the server time zone by searching for &#8220;date.timezone&#8221; and setting the appropriate time zone ID from the lists here: <a href="http://us2.php.net/manual/en/timezones.php">http://us2.php.net/manual/en/timezones.php</a></p>
<p>I&#8217;m on the west coast, so I use <code>date.timezone = America/Los_Angeles</code></p>
<p>Note that there are no quotes around the time zone ID.</p>
<p>Next, you&#8217;ll need to point PHP to the mysql.sock file. The default values are incorrect. Search for &#8220;mysql.sock&#8221; and change each configuration to point to /tmp/mysql.sock &#8211; you should find three instances to change.</p>
<p>
<pre>pdo_mysql.default_socket=/tmp/mysql.sock</pre>
<pre>mysql.default_socket = /tmp/mysql.sock</pre>
<pre>mysqli.default_socket = /tmp/mysql.sock</pre>
</p>
<p>(In previous versions, Mac OS X kept the mysql.sock file at /var/mysql/mysql.sock &#8211; the new location is more standard)</p>
<p>If you are a seasoned PHP developer you may wish to make other configuration changes at this time. If not, leave the rest alone.</p>
<p>Save and close the file.</p>
<p>All that is left to do now is to open System Preferences, launch the MySQL system preference and start the server. Show All, select &#8220;Sharing&#8221; and check the box next to &#8220;Web Sharing&#8221; from the list of options.</p>
<p>To verify everything works &#8211; create a text file in your Sites directory called php_info.php and include the following:</p>
<p><code>&lt;?php phpinfo() ?&gt;</code></p>
<p>Load this file up in your browser at http://localhost/~username/php_info.php (replacing &#8216;username&#8217; with your user name) and you should see a nicely formatted list of all your PHP configurations.</p>
<p>Enjoy.</p>
<p>UPDATE: Rob Allen has some instructions up which include configuring Xdebug &#8211; very handy: <a href="http://akrabat.com/2009/10/05/setting-up-php-mysql-on-os-x-10-6-snow-leopard/">http://akrabat.com/2009/10/05/setting-up-php-mysql-on-os-x-10-6-snow-leopard/</a></p>
			</div>
		</article>
		
										
								
					
						
						

			
		
			
		
			
	</div>
	<footer id="ft">
		<a href="../../index.html">
			<img src="../../wp-content/themes/abouthalf/images/logo.png" alt="Michael Barrett @ Abouthalf.com." class="logo">
		</a>
		<p>
			Michael Barrett @ Abouthalf.com.			<span class="description">Recipes, Web Development, Reviews, Photos, Links, and Things</span>
		</p>
		
		<div>
			<form method="get" id="search" action="http://duckduckgo.com/">
			   <input type="hidden" name="sites"value="abouthalf.github.io/blog-archives/"/>
			   <input type="hidden" name="ka" value="h"/>
			   <input type="hidden" name="k7" value="#fff"/>
			   <input type="hidden" name="kj" value="#e0e8f0"/>
			   <input type="hidden" name="ky" value="e"/>
			   <input type="hidden" name="kx" value="#369"/>
			   <input type="hidden" name="kt" value="Palatino"/>
			   <input type="text" name="q" maxlength="255" placeholder="Search this site with DuckDuckGo"/>
			   <input type="submit" class="submit" name="submit" id="searchsubmit" value="Search" />
			</form>
		</div>
		
		<nav class="menu-primary-menu-container"><ul id="menu-primary-menu" class="menu"><li id="menu-item-1480" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1480"><a href="../../about/index.html">About</a></li>
<li id="menu-item-1479" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1479"><a href="../../contact/index.html">Contact</a></li>
<li id="menu-item-1785" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1785"><a href="../../hosting-with-dreamhost/index.html">Hosting with Dreamhost</a></li>
<li id="menu-item-1784" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1784"><a href="http://bgrounder.abouthalf.com">B-grounder</a></li>
<li id="menu-item-1930" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1930"><a href="http://archiesrecipes.com">Archie&#8217;s Recipes</a></li>
</ul></nav>		
		<nav>
			<ul>
			<li id="categories-2" class="widget widget_categories"><h3 class="widget-title">By Category</h3>		<ul>
	<li class="cat-item cat-item-8"><a href="../../category/development/index.html" title="Software reviews, development tips and techniques, and notes on software and web development">Development</a>
</li>
	<li class="cat-item cat-item-17"><a href="../../category/recipes/index.html" >Recipes</a>
</li>
	<li class="cat-item cat-item-123"><a href="../../category/reviews/index.html" title="Reviews of things I like.">Reviews</a>
</li>
	<li class="cat-item cat-item-7"><a href="../../category/things/index.html" title="Just general things and stuff.">Things</a>
</li>
		</ul>
</li><li id="tag_cloud-3" class="widget widget_tag_cloud"><h3 class="widget-title">Tags</h3><div class="tagcloud"><a href='../../tag/adobe/index.html' class='tag-link-120' title='1 topic' style='font-size: 8pt;'>adobe</a>
<a href='../../tag/android/index.html' class='tag-link-126' title='2 topics' style='font-size: 10.571428571429pt;'>android</a>
<a href='../../tag/art/index.html' class='tag-link-153' title='3 topics' style='font-size: 12.285714285714pt;'>art</a>
<a href='../../tag/boo-hiss/index.html' class='tag-link-157' title='2 topics' style='font-size: 10.571428571429pt;'>boo-hiss</a>
<a href='../../tag/cocktails/index.html' class='tag-link-38' title='4 topics' style='font-size: 13.714285714286pt;'>cocktails</a>
<a href='../../tag/coffee/index.html' class='tag-link-64' title='3 topics' style='font-size: 12.285714285714pt;'>coffee</a>
<a href='../../tag/css/index.html' class='tag-link-66' title='18 topics' style='font-size: 22pt;'>css</a>
<a href='../../tag/design-2/index.html' class='tag-link-97' title='7 topics' style='font-size: 16.571428571429pt;'>design</a>
<a href='../../tag/dev/index.html' class='tag-link-96' title='7 topics' style='font-size: 16.571428571429pt;'>dev</a>
<a href='../../tag/development-2/index.html' class='tag-link-113' title='4 topics' style='font-size: 13.714285714286pt;'>development</a>
<a href='../../tag/drinks/index.html' class='tag-link-117' title='2 topics' style='font-size: 10.571428571429pt;'>drinks</a>
<a href='../../tag/facebook/index.html' class='tag-link-56' title='2 topics' style='font-size: 10.571428571429pt;'>facebook</a>
<a href='../../tag/feedly/index.html' class='tag-link-156' title='2 topics' style='font-size: 10.571428571429pt;'>feedly</a>
<a href='../../tag/fonts/index.html' class='tag-link-121' title='4 topics' style='font-size: 13.714285714286pt;'>fonts</a>
<a href='../../tag/food/index.html' class='tag-link-62' title='4 topics' style='font-size: 13.714285714286pt;'>food</a>
<a href='../../tag/html/index.html' class='tag-link-90' title='5 topics' style='font-size: 14.857142857143pt;'>html</a>
<a href='../../tag/ie9/index.html' class='tag-link-72' title='3 topics' style='font-size: 12.285714285714pt;'>ie9</a>
<a href='../../tag/ios/index.html' class='tag-link-116' title='3 topics' style='font-size: 12.285714285714pt;'>iOS</a>
<a href='../../tag/ipad/index.html' class='tag-link-70' title='3 topics' style='font-size: 12.285714285714pt;'>iPad</a>
<a href='../../tag/javascript/index.html' class='tag-link-98' title='13 topics' style='font-size: 20.142857142857pt;'>javascript</a>
<a href='../../tag/js/index.html' class='tag-link-99' title='5 topics' style='font-size: 14.857142857143pt;'>js</a>
<a href='../../tag/lol/index.html' class='tag-link-134' title='3 topics' style='font-size: 12.285714285714pt;'>lol</a>
<a href='../../tag/mac-osx/index.html' class='tag-link-49' title='2 topics' style='font-size: 10.571428571429pt;'>mac osx</a>
<a href='../../tag/markdown/index.html' class='tag-link-124' title='1 topic' style='font-size: 8pt;'>markdown</a>
<a href='../../tag/nerd/index.html' class='tag-link-130' title='1 topic' style='font-size: 8pt;'>nerd</a>
<a href='../../tag/nerds/index.html' class='tag-link-52' title='2 topics' style='font-size: 10.571428571429pt;'>nerds</a>
<a href='../../tag/nodejs/index.html' class='tag-link-132' title='3 topics' style='font-size: 12.285714285714pt;'>nodejs</a>
<a href='../../tag/pdx/index.html' class='tag-link-93' title='4 topics' style='font-size: 13.714285714286pt;'>pdx</a>
<a href='../../tag/photos/index.html' class='tag-link-110' title='2 topics' style='font-size: 10.571428571429pt;'>photos</a>
<a href='../../tag/php/index.html' class='tag-link-44' title='12 topics' style='font-size: 19.571428571429pt;'>php</a>
<a href='../../tag/pics-2/index.html' class='tag-link-92' title='11 topics' style='font-size: 19.142857142857pt;'>pics</a>
<a href='../../tag/poe/index.html' class='tag-link-122' title='1 topic' style='font-size: 8pt;'>poe</a>
<a href='../../tag/politics/index.html' class='tag-link-39' title='1 topic' style='font-size: 8pt;'>politics</a>
<a href='../../tag/portland/index.html' class='tag-link-84' title='2 topics' style='font-size: 10.571428571429pt;'>portland</a>
<a href='../../tag/quickies/index.html' class='tag-link-43' title='4 topics' style='font-size: 13.714285714286pt;'>quickies</a>
<a href='../../tag/reviews-2/index.html' class='tag-link-125' title='2 topics' style='font-size: 10.571428571429pt;'>reviews</a>
<a href='../../tag/science/index.html' class='tag-link-57' title='2 topics' style='font-size: 10.571428571429pt;'>science</a>
<a href='../../tag/silex/index.html' class='tag-link-88' title='3 topics' style='font-size: 12.285714285714pt;'>silex</a>
<a href='../../tag/swag/index.html' class='tag-link-129' title='1 topic' style='font-size: 8pt;'>swag</a>
<a href='../../tag/toys-2/index.html' class='tag-link-37' title='3 topics' style='font-size: 12.285714285714pt;'>toys</a>
<a href='../../tag/travel/index.html' class='tag-link-144' title='2 topics' style='font-size: 10.571428571429pt;'>travel</a>
<a href='../../tag/typekit/index.html' class='tag-link-60' title='2 topics' style='font-size: 10.571428571429pt;'>typekit</a>
<a href='../../tag/vacation/index.html' class='tag-link-14' title='2 topics' style='font-size: 10.571428571429pt;'>vacation</a>
<a href='../../tag/web/index.html' class='tag-link-138' title='2 topics' style='font-size: 10.571428571429pt;'>web</a>
<a href='../../tag/wordpress/index.html' class='tag-link-78' title='2 topics' style='font-size: 10.571428571429pt;'>Wordpress</a></div>
</li><li id="linkcat-10" class="widget widget_links"><h3 class="widget-title">Vanity</h3>
	<ul class='xoxo blogroll'>
<li><a href="http://twitter.com/device55" rel="me" title="Me @ Twitter">@device55</a></li>
<li><a href="https://twitter.com/abouthalf" title="Abouthalf.com updates on Twitter">@abouthalf</a></li>

	</ul>
</li>
			</ul>
		</nav>
	</footer>
</div>

</body>
</html>


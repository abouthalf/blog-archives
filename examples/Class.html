<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"		"http://www.w3.org/TR/html4/loose.dtd"><html><head>	<title>Class.js</title></head><body style="color: #000; background-color: #FFF"><pre><code><span style="color: #555;">/*&nbsp;Simple&nbsp;JavaScript&nbsp;Inheritance&nbsp;*&nbsp;By&nbsp;John&nbsp;Resig&nbsp;<a href="http://ejohn.org/blog/simple-javascript-inheritance/">http://ejohn.org/</a>&nbsp;*&nbsp;MIT&nbsp;Licensed.&nbsp;*/</span><span style="color: #000;"></span><span style="color: #555;">//&nbsp;Inspired&nbsp;by&nbsp;base2&nbsp;and&nbsp;Prototype</span><span style="color: #000;">(</span><span style="color: #00C;">function</span><span style="color: #000;">(){&nbsp;&nbsp;</span><span style="color: #00C;">var</span><span style="color: #000;">&nbsp;</span><span style="color: #000;">initializing</span><span style="color: #000;">&nbsp;=&nbsp;</span><span style="color: #00C;">false</span><span style="color: #000;">,&nbsp;</span><span style="color: #000;">fnTest</span><span style="color: #000;">&nbsp;=&nbsp;</span><span style="color: #930;">/xyz/</span><span style="color: #000;">.</span><span style="color: #000;">test</span><span style="color: #000;">(</span><span style="color: #00C;">function</span><span style="color: #000;">(){</span><span style="color: #000;">xyz</span><span style="color: #000;">;})&nbsp;?&nbsp;</span><span style="color: #930;">/\b_super\b/</span><span style="color: #000;">&nbsp;:&nbsp;</span><span style="color: #930;">/.*/</span><span style="color: #000;">;&nbsp;&nbsp;&nbsp;</span><span style="color: #555;">//&nbsp;The&nbsp;base&nbsp;Class&nbsp;implementation&nbsp;(does&nbsp;nothing)</span><span style="color: #000;">&nbsp;&nbsp;</span><span style="color: #00C;">this</span><span style="color: #000;">.</span><span style="color: #000;">Class</span><span style="color: #000;">&nbsp;=&nbsp;</span><span style="color: #00C;">function</span><span style="color: #000;">(){};&nbsp;&nbsp;&nbsp;</span><span style="color: #555;">//&nbsp;Create&nbsp;a&nbsp;new&nbsp;Class&nbsp;that&nbsp;inherits&nbsp;from&nbsp;this&nbsp;class</span><span style="color: #000;">&nbsp;&nbsp;</span><span style="color: #000;">Class</span><span style="color: #000;">.</span><span style="color: #000;">extend</span><span style="color: #000;">&nbsp;=&nbsp;</span><span style="color: #00C;">function</span><span style="color: #000;">(</span><span style="color: #000;">prop</span><span style="color: #000;">)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #00C;">var</span><span style="color: #000;">&nbsp;</span><span style="color: #000;">_super</span><span style="color: #000;">&nbsp;=&nbsp;</span><span style="color: #00C;">this</span><span style="color: #000;">.</span><span style="color: #000;">prototype</span><span style="color: #000;">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #555;">//&nbsp;Instantiate&nbsp;a&nbsp;base&nbsp;class&nbsp;(but&nbsp;only&nbsp;create&nbsp;the&nbsp;instance,</span><span style="color: #000;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #555;">//&nbsp;don't&nbsp;run&nbsp;the&nbsp;init&nbsp;constructor)</span><span style="color: #000;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000;">initializing</span><span style="color: #000;">&nbsp;=&nbsp;</span><span style="color: #00C;">true</span><span style="color: #000;">;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #00C;">var</span><span style="color: #000;">&nbsp;</span><span style="color: #000;">prototype</span><span style="color: #000;">&nbsp;=&nbsp;</span><span style="color: #00C;">new</span><span style="color: #000;">&nbsp;</span><span style="color: #00C;">this</span><span style="color: #000;">();&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000;">initializing</span><span style="color: #000;">&nbsp;=&nbsp;</span><span style="color: #00C;">false</span><span style="color: #000;">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #555;">//&nbsp;Copy&nbsp;the&nbsp;properties&nbsp;over&nbsp;onto&nbsp;the&nbsp;new&nbsp;prototype</span><span style="color: #000;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #00C;">for</span><span style="color: #000;">&nbsp;(</span><span style="color: #00C;">var</span><span style="color: #000;">&nbsp;</span><span style="color: #000;">name</span><span style="color: #000;">&nbsp;</span><span style="color: #00C;">in</span><span style="color: #000;">&nbsp;</span><span style="color: #000;">prop</span><span style="color: #000;">)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #555;">//&nbsp;Check&nbsp;if&nbsp;we're&nbsp;overwriting&nbsp;an&nbsp;existing&nbsp;function</span><span style="color: #000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000;">prototype</span><span style="color: #000;">[</span><span style="color: #000;">name</span><span style="color: #000;">]&nbsp;=&nbsp;</span><span style="color: #00C;">typeof</span><span style="color: #000;">&nbsp;</span><span style="color: #000;">prop</span><span style="color: #000;">[</span><span style="color: #000;">name</span><span style="color: #000;">]&nbsp;==&nbsp;</span><span style="color: #F39;">"function"</span><span style="color: #000;">&nbsp;&amp;&amp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #00C;">typeof</span><span style="color: #000;">&nbsp;</span><span style="color: #000;">_super</span><span style="color: #000;">[</span><span style="color: #000;">name</span><span style="color: #000;">]&nbsp;==&nbsp;</span><span style="color: #F39;">"function"</span><span style="color: #000;">&nbsp;&amp;&amp;&nbsp;</span><span style="color: #000;">fnTest</span><span style="color: #000;">.</span><span style="color: #000;">test</span><span style="color: #000;">(</span><span style="color: #000;">prop</span><span style="color: #000;">[</span><span style="color: #000;">name</span><span style="color: #000;">])&nbsp;?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(</span><span style="color: #00C;">function</span><span style="color: #000;">(</span><span style="color: #000;">name</span><span style="color: #000;">,&nbsp;</span><span style="color: #000;">fn</span><span style="color: #000;">){&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #00C;">return</span><span style="color: #000;">&nbsp;</span><span style="color: #00C;">function</span><span style="color: #000;">()&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #00C;">var</span><span style="color: #000;">&nbsp;</span><span style="color: #000;">tmp</span><span style="color: #000;">&nbsp;=&nbsp;</span><span style="color: #00C;">this</span><span style="color: #000;">.</span><span style="color: #000;">_super</span><span style="color: #000;">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #555;">//&nbsp;Add&nbsp;a&nbsp;new&nbsp;._super()&nbsp;method&nbsp;that&nbsp;is&nbsp;the&nbsp;same&nbsp;method</span><span style="color: #000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #555;">//&nbsp;but&nbsp;on&nbsp;the&nbsp;super-class</span><span style="color: #000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #00C;">this</span><span style="color: #000;">.</span><span style="color: #000;">_super</span><span style="color: #000;">&nbsp;=&nbsp;</span><span style="color: #000;">_super</span><span style="color: #000;">[</span><span style="color: #000;">name</span><span style="color: #000;">];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #555;">//&nbsp;The&nbsp;method&nbsp;only&nbsp;need&nbsp;to&nbsp;be&nbsp;bound&nbsp;temporarily,&nbsp;so&nbsp;we</span><span style="color: #000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #555;">//&nbsp;remove&nbsp;it&nbsp;when&nbsp;we're&nbsp;done&nbsp;executing</span><span style="color: #000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #00C;">var</span><span style="color: #000;">&nbsp;</span><span style="color: #000;">ret</span><span style="color: #000;">&nbsp;=&nbsp;</span><span style="color: #000;">fn</span><span style="color: #000;">.</span><span style="color: #000;">apply</span><span style="color: #000;">(</span><span style="color: #00C;">this</span><span style="color: #000;">,&nbsp;</span><span style="color: #00C;">arguments</span><span style="color: #000;">);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #00C;">this</span><span style="color: #000;">.</span><span style="color: #000;">_super</span><span style="color: #000;">&nbsp;=&nbsp;</span><span style="color: #000;">tmp</span><span style="color: #000;">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #00C;">return</span><span style="color: #000;">&nbsp;</span><span style="color: #000;">ret</span><span style="color: #000;">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})(</span><span style="color: #000;">name</span><span style="color: #000;">,&nbsp;</span><span style="color: #000;">prop</span><span style="color: #000;">[</span><span style="color: #000;">name</span><span style="color: #000;">])&nbsp;:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000;">prop</span><span style="color: #000;">[</span><span style="color: #000;">name</span><span style="color: #000;">];&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #555;">//&nbsp;The&nbsp;dummy&nbsp;class&nbsp;constructor</span><span style="color: #000;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #00C;">function</span><span style="color: #000;">&nbsp;</span><span style="color: #000;">Class</span><span style="color: #000;">()&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #555;">//&nbsp;All&nbsp;construction&nbsp;is&nbsp;actually&nbsp;done&nbsp;in&nbsp;the&nbsp;init&nbsp;method</span><span style="color: #000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #00C;">if</span><span style="color: #000;">&nbsp;(&nbsp;!</span><span style="color: #000;">initializing</span><span style="color: #000;">&nbsp;&amp;&amp;&nbsp;</span><span style="color: #00C;">this</span><span style="color: #000;">.</span><span style="color: #000;">init</span><span style="color: #000;">&nbsp;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #00C;">this</span><span style="color: #000;">.</span><span style="color: #000;">init</span><span style="color: #000;">.</span><span style="color: #000;">apply</span><span style="color: #000;">(</span><span style="color: #00C;">this</span><span style="color: #000;">,&nbsp;</span><span style="color: #00C;">arguments</span><span style="color: #000;">);&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #555;">//&nbsp;Populate&nbsp;our&nbsp;constructed&nbsp;prototype&nbsp;object</span><span style="color: #000;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000;">Class</span><span style="color: #000;">.</span><span style="color: #000;">prototype</span><span style="color: #000;">&nbsp;=&nbsp;</span><span style="color: #000;">prototype</span><span style="color: #000;">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #555;">//&nbsp;Enforce&nbsp;the&nbsp;constructor&nbsp;to&nbsp;be&nbsp;what&nbsp;we&nbsp;expect</span><span style="color: #000;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000;">Class</span><span style="color: #000;">.</span><span style="color: #000;">prototype</span><span style="color: #000;">.</span><span style="color: #000;">constructor</span><span style="color: #000;">&nbsp;=&nbsp;</span><span style="color: #000;">Class</span><span style="color: #000;">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #555;">//&nbsp;And&nbsp;make&nbsp;this&nbsp;class&nbsp;extendable</span><span style="color: #000;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000;">Class</span><span style="color: #000;">.</span><span style="color: #000;">extend</span><span style="color: #000;">&nbsp;=&nbsp;</span><span style="color: #00C;">arguments</span><span style="color: #000;">.</span><span style="color: #000;">callee</span><span style="color: #000;">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #00C;">return</span><span style="color: #000;">&nbsp;</span><span style="color: #000;">Class</span><span style="color: #000;">;&nbsp;&nbsp;};})();</span></code></pre></body></html>